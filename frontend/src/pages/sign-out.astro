---
import Layout from '../layouts/Layout.astro';
import Section from '../components/Section/Section.svelte';
import Title from '../components/Title.svelte';


["access", "sessionId"].forEach(cookie => {
    Astro.cookies.set(cookie, "", {
        path: "/",
        sameSite: "lax",
        expires: new Date(0),
    })
})

const client_id = import.meta.env.PUBLIC_INTERNAL_ACCESS_CLIENT_ID;
if (!client_id) {
    throw new Error(
    "PUBLIC_INTERNAL_ACCESS_CLIENT_ID environment variable is not set. This is required for the application to function.",
  );
}
const sign_out_url = `https://sso.service.security.gov.uk/sign-out?from_app=${client_id}`;
return Astro.redirect(sign_out_url);
---
<Layout>
	<Section>
		<Title level={1} text="Signed out" />

        <p class="my-4 text-md text-gray-500">
            You have signed out
        </p>
	</Section>
</Layout>
