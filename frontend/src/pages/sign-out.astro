---
import Layout from "../layouts/Layout.astro";
import Section from "../components/Section/Section.svelte";
import Title from "../components/Title.svelte";
import { getClientId } from "../global/utils";

const cookiesToDelete = [
  "access",
  "sessionId",
  "AWSALBAuthNonce",
  "__Secure-AuthSessionCookie-0",
  "__Secure-AuthSessionCookie-1",
];

for (var cookie of cookiesToDelete) {
  Astro.cookies.set(cookie, "", {
    path: "/",
    sameSite: "lax",
    expires: new Date(0),
  });
}

const clientId = getClientId();
const signOutUrl = `https://sso.service.security.gov.uk/sign-out?from_app=${clientId}`;

return Astro.redirect(signOutUrl);
---

<Layout>
  <Section>
    <Title level={1} text="Signed out" />

    <p class="text-md my-4 text-gray-500">You have signed out</p>
  </Section>
</Layout>
