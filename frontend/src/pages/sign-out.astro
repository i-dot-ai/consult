---
import Layout from '../layouts/Layout.astro';
import Section from '../components/Section/Section.svelte';
import Title from '../components/Title.svelte';
import { getClientId } from '../global/utils';


console.log("current cookies =", Astro.request.headers.get("cookies"));

["access", "sessionId", "AWSALBAuthNonce", "__Secure-AuthSessionCookie-0", "__Secure-AuthSessionCookie-1"].forEach(cookie => {
    Astro.cookies.set(cookie, "", {
        path: "/",
        sameSite: "lax",
        expires: new Date(0),
    })
})

console.log("remaining cookies =", Astro.request.headers.get("cookies"));

const client_id = getClientId();
const sign_out_url = `https://sso.service.security.gov.uk/sign-out?from_app=${client_id}`;
return Astro.redirect(sign_out_url);
---
<Layout>
	<Section>
		<Title level={1} text="Signed out" />

        <p class="my-4 text-md text-gray-500">
            You have signed out
        </p>
	</Section>
</Layout>
