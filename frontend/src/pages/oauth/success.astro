---
// OAuth success page - Django redirects here after setting secure cookies
const accessToken = Astro.cookies.get("access")?.value;

// If we have a token, redirect to consultations
if (accessToken) {
    return Astro.redirect("/consultations");
}

// If no token, there was an error - redirect to sign in
return Astro.redirect("/sign-in?error=auth_failed");
---